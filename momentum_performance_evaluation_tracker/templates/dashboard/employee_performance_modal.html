<!-- Performance Details Modal -->
<div id="performanceModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <button class="modal-close" id="closePerformanceModal">Ã—</button>
        <h2>Performance Details - ${employeeData.employee_name}</h2>
        <div class="modal-body">
            <div class="employee-basic-info">
                <div class="info-item">
                    <strong>Position:</strong> ${employeeData.position}
                </div>
                <div class="info-item">
                    <strong>Department:</strong> ${employeeData.department}
                </div>
            </div>
            
            <div class="performance-metrics-grid">
                <div class="metric-card">
                    <h3>Overall Performance</h3>
                    <div class="metric-value large ${getPerformanceClass(employeeData.attendance_rate, 85)}">
                        ${employeeData.attendance_rate}%
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Attendance Rate</h3>
                    <div class="metric-value ${getPerformanceClass(employeeData.attendance_rate, 85)}">
                        ${employeeData.attendance_rate}%
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Compliance Rate</h3>
                    <div class="metric-value ${getPerformanceClass(employeeData.compliance_rate, 80)}">
                        ${employeeData.compliance_rate}%
                    </div>
                </div>
                <div class="metric-card">
                    <h3>Backlog Items</h3>
                    <div class="metric-value ${getPerformanceClass(employeeData.backlog_count, 2, true)}">
                        ${employeeData.backlog_count}
                    </div>
                </div>
            </div>
            
            ${employeeData.recent_evaluations && employeeData.recent_evaluations.length > 0 ? `
            <div class="evaluations-section">
                <h3>Recent Evaluations</h3>
                <div class="evaluations-list">
                    ${employeeData.recent_evaluations.map(eval => `
                        <div class="evaluation-item">
                            <div class="eval-period">${eval.period}</div>
                            <div class="eval-date">${eval.date}</div>
                            <div class="eval-kpis">
                                ${eval.kpi_scores.map(kpi => `
                                    <span class="kpi-badge">${kpi.kpi_name}: ${kpi.score}/${kpi.target}</span>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
            ` : ''}
            
            ${employeeData.pending_tasks && employeeData.pending_tasks.length > 0 ? `
            <div class="tasks-section">
                <h3>Pending Tasks</h3>
                <div class="tasks-list">
                    ${employeeData.pending_tasks.map(task => `
                        <div class="task-item ${task.priority.toLowerCase()}">
                            <span class="task-desc">${task.description}</span>
                            <span class="task-due">Due: ${task.due_date}</span>
                            <span class="task-priority">${task.priority}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
            ` : ''}
        </div>
    </div>
</div>
